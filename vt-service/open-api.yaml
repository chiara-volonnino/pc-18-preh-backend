openapi: 3.0.0
servers:
  - url: 'https://localhost:10000/v1'
info:
  description: Vehicle Tracking Service API for PreH
  title: Vehicle Tracking Service API
  version: '1.0'
  license:
    name: Apache 2.0
    url: 'http://www.apache.org/licenses/LICENSE-2.0.html'
paths:
  '/events-tracking/{event-id}':
    get:
      summary: Returns all the tracking details about the event
      description: By passing in the appropriate event-id and (eventually) the mission-id, you can search for all the currently available tracking details.
      parameters:
        - $ref: '#/components/parameters/event-param'
        - $ref: '#/components/parameters/mission-param'
          required: false
      responses:
        '200':
          description: 'ok'
          content: 
            application/json:
              schema: 
                $ref: '#/components/schemas/eventTracking'
        '400':
          description: 'bad input parameter'
        '404':
          description: 'resource not found'
        '500':
          description: 'generic server error'
  '/events-tracking/{event-id}/oc-call':
    get:
      summary: Returns the Operational Center call details
      description: By passing in the appropriate event-id and (eventually) the mission-id, you can search for details about the Operational Center call.
      parameters:
        - $ref: '#/components/parameters/event-param'
        - $ref: '#/components/parameters/mission-param'
          required: true
      responses:
        '200':
          description: 'ok'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/timelineItem'
        '400':
          description: 'bad input parameter'
        '404':
          description: 'resource not found'
        '500':
          description: 'generic server error'
    post:
      summary: Adds tracking details about the Operational Center call 
      description: By passing in both the event-id and the mission-id, you will add tracking details (datetime and place) about the Operational Center call.
      responses:
        '201':
          description: 'item successfully created'
        '400':
          description: 'bad input parameter'
        '409':
          description: 'conflict: the item already exists'
        '500':
          description: 'generic server error'
      parameters:
        - $ref: '#/components/parameters/event-param'
        - $ref: '#/components/parameters/mission-param'
          required: true
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/timelineItem'
        description: Tracking item to add
  '/events-tracking/{event-id}/crew-departure':
    get:
      summary: Returns the crew departure details
      description: By passing in the appropriate event-id and (eventually) the mission-id, you can search for details about the crew departure time and place.
      parameters:
        - $ref: '#/components/parameters/event-param'
        - $ref: '#/components/parameters/mission-param'
          required: true
      responses:
        '200':
          description: 'ok'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/timelineItem'
        '400':
          description: 'bad input parameter'
        '404':
          description: 'resource not found'
        '500':
          description: 'generic server error'
    post:
      summary: Adds tracking details about the crew departure 
      description: By passing in both the event-id and the mission-id, you will add tracking details (datetime and place) about the crew departure.
      responses:
        '201':
          description: 'item successfully created'
        '400':
          description: 'bad input parameter'
        '409':
          description: 'conflict: the item already exists'
        '500':
          description: 'generic server error'
      parameters:
        - $ref: '#/components/parameters/event-param'
        - $ref: '#/components/parameters/mission-param'
          required: true
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/timelineItem'
        description: Tracking item to add
  '/events-tracking/{event-id}/landing-onsite':
    get:
      summary: Returns the landing onsite details
      description: By passing in the appropriate event-id and (eventually) the mission-id, you can search for details about the landing onsite time and place.
      parameters:
        - $ref: '#/components/parameters/event-param'
        - $ref: '#/components/parameters/mission-param'
          required: true
      responses:
        '200':
          description: 'ok'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/timelineItem'
        '400':
          description: 'bad input parameter'
        '404':
          description: 'resource not found'
        '500':
          description: 'generic server error'
    post:
      summary: Adds tracking details about the landing onsite 
      description: By passing in both the event-id and the mission-id, you will add tracking details (datetime and place) about the landing onsite.
      responses:
        '201':
          description: 'item successfully created'
        '400':
          description: 'bad input parameter'
        '409':
          description: 'conflict: the item already exists'
        '500':
          description: 'generic server error'
      parameters:
        - $ref: '#/components/parameters/event-param'
        - $ref: '#/components/parameters/mission-param'
          required: true
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/timelineItem'
        description: Tracking item to add
  '/events-tracking/{event-id}/takeoff-onsite':
    get:
      summary: Returns the details about the takeoff from onsite
      description: By passing in the appropriate event-id and (eventually) the mission-id, you can search for details (time and place) about the takeoff from onsite.
      parameters:
        - $ref: '#/components/parameters/event-param'
        - $ref: '#/components/parameters/mission-param'
          required: true
      responses:
        '200':
          description: 'ok'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/timelineItem'
        '400':
          description: 'bad input parameter'
        '404':
          description: 'resource not found'
        '500':
          description: 'generic server error'
    post:
      summary: Adds tracking details about the takeoff from onsite
      description: By passing in both the event-id and the mission-id, you will add tracking details (datetime and place) about the takeoff from onsite.
      responses:
        '201':
          description: 'item successfully created'
        '400':
          description: 'bad input parameter'
        '409':
          description: 'conflict: the item already exists'
        '500':
          description: 'generic server error'
      parameters:
        - $ref: '#/components/parameters/event-param'
        - $ref: '#/components/parameters/mission-param'
          required: true
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/timelineItem'
        description: Tracking item to add
  '/events-tracking/{event-id}/landing-helipad':
    get:
      summary: Returns the details about the landing on the helipad
      description: By passing in the appropriate event-id and (eventually) the mission-id, you can search for details (time and place) about the landing on the helipad.
      parameters:
        - $ref: '#/components/parameters/event-param'
        - $ref: '#/components/parameters/mission-param'
          required: true
      responses:
        '200':
          description: 'ok'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/timelineItem'
        '400':
          description: 'bad input parameter'
        '404':
          description: 'resource not found'
        '500':
          description: 'generic server error'
    post:
      summary: Adds tracking details about the landing on the helipad
      description: By passing in both the event-id and the mission-id, you will add tracking details (datetime and place) about the landing on the helipad.
      responses:
        '201':
          description: 'item successfully created'
        '400':
          description: 'bad input parameter'
        '409':
          description: 'conflict: the item already exists'
        '500':
          description: 'generic server error'
      parameters:
        - $ref: '#/components/parameters/event-param'
        - $ref: '#/components/parameters/mission-param'
          required: true
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/timelineItem'
        description: Tracking item to add
  '/events-tracking/{event-id}/arrival-er':
    get:
      summary: Returns the details about the actual arrival at the ER
      description: By passing in the appropriate event-id and (eventually) the mission-id, you can search for details (time and place) about the actual arrival at the ER.
      parameters:
        - $ref: '#/components/parameters/event-param'
        - $ref: '#/components/parameters/mission-param'
          required: true
      responses:
        '200':
          description: 'ok'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/timelineItem'
        '400':
          description: 'bad input parameter'
        '404':
          description: 'resource not found'
        '500':
          description: 'generic server error'
    post:
      summary: Adds tracking details about the actual arrival at the ER
      description: By passing in both the event-id and the mission-id, you will add tracking details (datetime and place) about the actual arrival at the ER.
      responses:
        '201':
          description: 'item successfully created'
        '400':
          description: 'bad input parameter'
        '409':
          description: 'conflict: the item already exists'
        '500':
          description: 'generic server error'
      parameters:
        - $ref: '#/components/parameters/event-param'
        - $ref: '#/components/parameters/mission-param'
          required: true
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/timelineItem'
        description: Tracking item to add
components:
  parameters:
    event-param:
      in: path
      name: event-id
      description: identifier of the event
      required: true
      schema:
        type: string
        format: uuid
        example: 'd290f1ee-6c54-4b01-90e6-d701748f0851'
    mission-param:
      in: query
      name: mission-id
      description: identifier of the mission vehicle
      schema:
        type: string
        format: uuid
        example: 'd290f1ee-6c54-4b01-90e6-d701748f0851'

  schemas:
    timelineItem:
      type: object
      required:
        - datetime
        - place
      properties:
        datetime:
          type: string
          format: date-time
          example: '1985-04-12T23:20:50.52Z'
        place:
          type: string
          example: 'Via Cervese 123'
    missionTracking:  
      type: object
      properties:
        ocCall:
          $ref: '#/components/schemas/timelineItem'
        crewDeparture:
          $ref: '#/components/schemas/timelineItem'
        landingOnsite:
          $ref: '#/components/schemas/timelineItem'
        takeoffOnsite:
          $ref: '#/components/schemas/timelineItem'
        landingHelipad:
          $ref: '#/components/schemas/timelineItem'
        arrivalEr:
          $ref: '#/components/schemas/timelineItem'
    eventTracking:
      type: array
      items:
        type: object
        properties:
          missionId: 
            type: string
          missionTracking:
            $ref: '#/components/schemas/missionTracking'